{% extends 'base.html' %}

<!--
=============================================================================
HAUNTED PLACES PAGE TEMPLATE
=============================================================================

This template displays a list of haunted locations with scary stories and history.

FOR JUNIOR DEVELOPERS - DJANGO TEMPLATE BASICS:
------------------------------------------------
Django templates use special tags and filters to make pages dynamic.

TEMPLATE COMMENTS:
   Single line: {# This is a comment #}
   Multi-line: Use HTML comments like this block

TEMPLATE TAGS (for logic):
   Use curly-brace-percent syntax for template tags
   - extends: Inherit from base template
   - block: Define a section that can override parent
   - if/endif: Conditional logic
   - for/endfor: Loops
   - url: Generate URLs by name

TEMPLATE VARIABLES (for displaying data):
   Use double-curly-brace syntax
   Access variables passed from the view

TEMPLATE FILTERS (for transforming data):
   Use pipe symbol to apply filters
   Examples: upper, date, truncatewords, default

=============================================================================
TAILWIND CSS STYLING NOTES:
=============================================================================

This project uses Tailwind CSS for styling. Tailwind uses utility classes
that describe what they do directly in the class name.

IMPORTANT: After modifying any Tailwind classes in this file, you MUST rebuild
the CSS file by running this command in your terminal:

    npm run build:css

Common Tailwind patterns used in this file:

SPACING:
  - p-4 = padding: 1rem (16px) on all sides
  - px-4 = padding-left and padding-right: 1rem
  - py-8 = padding-top and padding-bottom: 2rem (32px)
  - m-4 = margin: 1rem
  - mt-8 = margin-top: 2rem
  - space-y-4 = vertical spacing between child elements

LAYOUT:
  - container = centers content with responsive max-width
  - mx-auto = centers horizontally (margin left/right auto)
  - flex = display: flex
  - grid = display: grid
  - grid-cols-1 = 1 column grid
  - md:grid-cols-2 = 2 columns on medium screens and up
  - gap-6 = gap between grid items

COLORS:
  - bg-orange-600 = background color (orange, shade 600)
  - text-purple-800 = text color (purple, shade 800)
  - hover:bg-orange-700 = background on hover

TYPOGRAPHY:
  - text-xl = font size extra large
  - font-bold = font weight bold
  - text-center = text alignment center

BORDERS & SHADOWS:
  - rounded-lg = large border radius
  - shadow-lg = large box shadow
  - border-2 = 2px border width

RESPONSIVE DESIGN:
  Tailwind uses breakpoint prefixes:
  - sm: = Small screens (640px+)
  - md: = Medium screens (768px+)
  - lg: = Large screens (1024px+)
  - xl: = Extra large screens (1280px+)

  Example: "text-sm md:text-lg" means small text on mobile, large on desktop

TRANSITIONS:
  - transition = enables smooth transitions
  - duration-300 = transition lasts 300ms
  - hover:scale-105 = scales to 105% on hover

=============================================================================
REMINDER: REBUILD TAILWIND CSS AFTER STYLE CHANGES
=============================================================================

Whenever you add, remove, or modify Tailwind classes in this file:

1. Save this file
2. Open your terminal
3. Run: npm run build:css
4. Refresh your browser to see the changes

Why? Tailwind scans your HTML files to generate only the CSS classes you use.
If you don't rebuild, new classes won't be available and the page won't look right!

Alternative: Run the watch command to auto-rebuild on changes:
    npm run watch:css

=============================================================================
-->

{# Set the browser tab title #}
{% block title %}Haunted Places - ShriekedIn{% endblock %}

{# EXTRA CSS BLOCK: Add custom CSS or additional stylesheets here #}
{% block extra_css %}
<style>
    /* Custom CSS for haunted places page */
    .haunted-card {
        /* Add subtle hover animation to cards */
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .haunted-card:hover {
        /* Lift card slightly on hover */
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .spooky-border {
        /* Decorative border for Halloween theme */
        border: 2px solid #9333ea; /* purple-700 */
        border-radius: 0.5rem;
    }
</style>
{% endblock %}

{# MAIN CONTENT BLOCK: Page-specific content goes here #}
{% block content %}

<!--
=============================================================================
HERO SECTION - Page Header
=============================================================================
Purpose: Eye-catching header to introduce the page
Classes explained:
  - halloween-gradient: Custom gradient defined in CSS (orange to purple)
  - py-20: Large padding top and bottom (5rem = 80px)
  - container mx-auto: Centers content with responsive max width
  - px-4: Horizontal padding (1rem = 16px)
  - text-center: Centers all text
-->
<section class="halloween-gradient py-20">
    <div class="container mx-auto px-4 text-center">
        {# Main page heading - large and bold #}
        <h1 class="text-5xl md:text-7xl font-bold text-white mb-6">
            üëª Haunted Places üëª
        </h1>

        {# Subtitle/description #}
        <p class="text-xl md:text-2xl text-orange-200 mb-8">
            Explore local legends, ghost stories, and historically haunted locations in your area
        </p>

        {# Conditional content based on user login status #}
        {% if user.is_authenticated %}
            <p class="text-lg text-white">
                Welcome back, {{ user.username }}! Brave enough to explore? üïØÔ∏è
            </p>
        {% else %}
            <p class="text-lg text-orange-100">
                <a href="{% url 'core:login' %}" class="underline hover:text-white transition">
                    Sign in
                </a> to submit your own haunted location stories!
            </p>
        {% endif %}
    </div>
</section>

<!--
=============================================================================
FILTER/SEARCH SECTION
=============================================================================
Purpose: Allow users to filter haunted places by criteria
This is a placeholder for future functionality (Sprint 4)
-->
<section class="py-8 bg-white border-b">
    <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
            <h2 class="text-2xl font-bold text-gray-800">
                üîç Find Your Fright
            </h2>

            {# Simple filter form (placeholder for now) #}
            <div class="flex flex-col sm:flex-row gap-4 w-full md:w-auto">
                {# Search input #}
                <input
                    type="text"
                    placeholder="Search haunted places..."
                    class="px-4 py-2 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-600 transition"
                >

                {# Filter dropdown #}
                <select class="px-4 py-2 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-600 transition">
                    <option value="">All Types</option>
                    <option value="house">Haunted Houses</option>
                    <option value="cemetery">Cemeteries</option>
                    <option value="building">Historic Buildings</option>
                    <option value="landmark">Local Landmarks</option>
                </select>

                {# Search button #}
                <button class="btn-primary px-6 py-2">
                    Search
                </button>
            </div>
        </div>
    </div>
</section>

<!--
=============================================================================
HAUNTED PLACES GRID - Main Content
=============================================================================
Purpose: Display all haunted places in a responsive grid

The 'haunted_places' variable is passed from the view (views.py).
In the view, you define: context = {'haunted_places': [...]}
-->
<section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">

        {# Check if we have any haunted places to display #}
        {% if haunted_places %}
            <!--
            RESPONSIVE GRID:
            - grid-cols-1: 1 column on mobile
            - md:grid-cols-2: 2 columns on tablets
            - lg:grid-cols-3: 3 columns on desktops
            - gap-8: Space between grid items (2rem = 32px)
            -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                {# Loop through each haunted place #}
                {% for place in haunted_places %}
                <div class="haunted-card bg-white rounded-lg shadow-lg overflow-hidden spooky-border">

                    {# Place image or placeholder #}
                    {% if place.image %}
                        <img
                            src="{{ place.image.url }}"
                            alt="{{ place.name }}"
                            class="w-full h-48 object-cover"
                        >
                    {% else %}
                        {# Placeholder if no image #}
                        <div class="w-full h-48 bg-gradient-to-br from-purple-800 to-orange-600 flex items-center justify-center">
                            <span class="text-6xl">üëª</span>
                        </div>
                    {% endif %}

                    {# Card content #}
                    <div class="p-6">
                        {# Place name/title #}
                        <h3 class="text-2xl font-bold text-purple-900 mb-2">
                            {{ place.name }}
                        </h3>

                        {# Location #}
                        <p class="text-gray-600 mb-3 flex items-center">
                            <span class="mr-2">üìç</span>
                            {{ place.location|default:"Unknown Location" }}
                        </p>

                        {# Place type badge #}
                        <span class="inline-block px-3 py-1 bg-orange-200 text-orange-800 rounded-full text-sm font-semibold mb-4">
                            {{ place.place_type|default:"Haunted Location" }}
                        </span>

                        {# Description with truncate filter - limits to 30 words and adds "..." #}
                        <p class="text-gray-700 mb-4">
                            {{ place.description|truncatewords:30 }}
                        </p>

                        {# Scary rating displayed as ghost emojis #}
                        <div class="flex items-center mb-4">
                            <span class="text-sm font-semibold text-gray-700 mr-2">
                                Scary Rating:
                            </span>
                            {# Display 5 ghosts, colored based on rating #}
                            {% for i in "12345"|make_list %}
                                {% if forloop.counter <= place.scary_rating|default:3 %}
                                    <span class="text-orange-500">üëª</span>
                                {% else %}
                                    <span class="text-gray-300">üëª</span>
                                {% endif %}
                            {% endfor %}
                        </div>

                        {# Action buttons #}
                        <div class="flex gap-3">
                            {# Dynamic URL with parameter - passes place.id to detail view #}
                            <a
                                href="{% url 'core:haunted_detail' place.id %}"
                                class="flex-1 btn-primary text-center py-2"
                            >
                                Read Story
                            </a>

                            <button
                                class="px-4 py-2 border-2 border-purple-600 text-purple-600 rounded-lg hover:bg-purple-600 hover:text-white transition duration-300"
                                title="Save to favorites"
                            >
                                üîñ
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {# End of for loop #}

            </div>

        {% else %}
            {# EMPTY STATE - Shows when no haunted places exist #}
            <div class="text-center py-16">
                <div class="text-8xl mb-6">üèöÔ∏è</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">
                    No Haunted Places Yet
                </h2>
                <p class="text-gray-600 mb-8">
                    Be the first to share a spooky story from your area!
                </p>
                {% if user.is_authenticated %}
                    <a href="#" class="btn-primary inline-block px-8 py-3">
                        Submit a Haunted Place
                    </a>
                {% else %}
                    <a href="{% url 'core:login' %}" class="btn-primary inline-block px-8 py-3">
                        Sign In to Submit
                    </a>
                {% endif %}
            </div>
        {% endif %}

    </div>
</section>

<!--
=============================================================================
CALL TO ACTION SECTION
=============================================================================
Purpose: Encourage users to contribute their own haunted place stories
-->
<section class="py-16 bg-gradient-to-r from-orange-600 to-purple-800">
    <div class="container mx-auto px-4 text-center">
        <h2 class="text-4xl font-bold text-white mb-6">
            Know a Haunted Place?
        </h2>
        <p class="text-xl text-orange-100 mb-8">
            Share your local ghost stories and legends with the community!
        </p>

        {% if user.is_authenticated %}
            {# Logged in users can submit directly #}
            <a
                href="#"
                class="bg-white text-purple-800 hover:bg-gray-100 font-bold py-3 px-8 rounded-lg transition duration-300 inline-block text-lg"
            >
                Submit Your Story
            </a>
        {% else %}
            {# Not logged in - redirect to login with next parameter #}
            <a
                href="{% url 'core:login' %}?next={% url 'core:haunted_places' %}"
                class="bg-white text-purple-800 hover:bg-gray-100 font-bold py-3 px-8 rounded-lg transition duration-300 inline-block text-lg"
            >
                Sign In to Submit
            </a>
        {% endif %}
    </div>
</section>

<!--
=============================================================================
TIPS SECTION - Educational Content
=============================================================================
-->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">
            üëª Tips for Visiting Haunted Places
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {# Tip cards - Static content #}
            <div class="bg-purple-50 p-6 rounded-lg border-2 border-purple-200">
                <div class="text-4xl mb-3 text-center">üö´</div>
                <h3 class="text-xl font-bold text-purple-900 mb-2 text-center">
                    Respect Property
                </h3>
                <p class="text-gray-700 text-center">
                    Never trespass or enter without permission
                </p>
            </div>

            <div class="bg-orange-50 p-6 rounded-lg border-2 border-orange-200">
                <div class="text-4xl mb-3 text-center">üë•</div>
                <h3 class="text-xl font-bold text-orange-900 mb-2 text-center">
                    Bring Friends
                </h3>
                <p class="text-gray-700 text-center">
                    Always explore in groups for safety
                </p>
            </div>

            <div class="bg-purple-50 p-6 rounded-lg border-2 border-purple-200">
                <div class="text-4xl mb-3 text-center">üïØÔ∏è</div>
                <h3 class="text-xl font-bold text-purple-900 mb-2 text-center">
                    Be Prepared
                </h3>
                <p class="text-gray-700 text-center">
                    Bring flashlights and fully charged phones
                </p>
            </div>

            <div class="bg-orange-50 p-6 rounded-lg border-2 border-orange-200">
                <div class="text-4xl mb-3 text-center">üì∏</div>
                <h3 class="text-xl font-bold text-orange-900 mb-2 text-center">
                    Document It
                </h3>
                <p class="text-gray-700 text-center">
                    Take photos and share your experiences
                </p>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{# EXTRA JAVASCRIPT BLOCK: Add page-specific JavaScript here #}
{% block extra_js %}
<script>
    // Simple JavaScript for interactive features
    console.log('Haunted Places page loaded! üëª');

    // Example: Add click tracking for "Read Story" buttons
    document.addEventListener('DOMContentLoaded', function() {
        const storyButtons = document.querySelectorAll('.haunted-card a');

        storyButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                // You could track analytics here
                console.log('User clicked to read a haunted place story');
            });
        });
    });

    // Example: Simple search functionality (placeholder)
    const searchInput = document.querySelector('input[type="text"]');
    if (searchInput) {
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            console.log('User searching for:', searchTerm);
            // In production, you'd filter results or make an AJAX call here
        });
    }
</script>
{% endblock %}

<!--
=============================================================================
DEVELOPMENT CHECKLIST FOR JUNIOR DEVELOPERS
=============================================================================

To make this page fully functional:

1. CREATE THE MODEL (models.py):
   - Define HauntedPlace model with fields:
     * name (CharField)
     * location (CharField)
     * description (TextField)
     * place_type (CharField with choices)
     * scary_rating (IntegerField, 1-5)
     * image (ImageField, optional)
     * created_at, updated_at timestamps

2. CREATE THE VIEW (views.py):
   - Import the HauntedPlace model
   - Query all haunted places: HauntedPlace.objects.all()
   - Pass them to template: {'haunted_places': places}

3. CREATE THE URL (urls.py):
   - Already done! Check core/urls.py line 85

4. RUN MIGRATIONS:
   - python manage.py makemigrations
   - python manage.py migrate

5. CREATE DETAIL PAGE:
   - Create haunted_detail.html template
   - Create detail view (already done in views.py)
   - Add URL pattern (already done in urls.py)

6. ADD TO NAVIGATION:
   - Already done! Check base.html

7. REBUILD TAILWIND CSS:
   - Run: npm run build:css
   - Or: npm run watch:css (for automatic rebuilding)

8. TEST:
   - Create sample data in Django admin
   - Visit /haunted/ to see the page
   - Test responsiveness on different screen sizes

=============================================================================
REMINDER: After ANY Tailwind class changes, run: npm run build:css
=============================================================================
-->
